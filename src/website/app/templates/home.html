{% extends "base.html" %}

{% block app_content %}

<style>
  .extendfull, .extendleft
  {
  padding-left: 100px;
  margin-left: -300px;
  padding-bottom: 800px;
  }
  .space-above {
  padding-top: 50px;
  }
  .space-title {
  padding-top: 150px;
  }
</style>
<p>

  </p>
<div class="container-fluid">
  
  <div class="row">
    <div class="col-sm-6">
      <div id="map" class="extendleft" style="height: 20%;"></div>
    </div>
    <div class="col-sm-6">
      
      <p>
	<h1 align="center" class="space-title"> In-A-Pinch</h1>
      </p>

      <p>
	<h4 align="center">Reliably predicting bike and dock availability <br />for sensible Citi Bike route planning.</h4>
	</p>
  <p class="space-above">
    <div class="input-group">
      <div class="input-group-prepend">
	<span class="input-group-text">Start</span>
      </div>
      <input type="text" aria-label="First name" class="form-control" value="523 Prospect Place, Brooklyn NY 11238">
    </div>
    <div class="input-group">
      <div class="dropdown">
	<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Start Location Examples
	  <span class="caret"></span></button>
	<ul class="dropdown-menu">
	  <li><a href="#">523 Prospect Place, Brooklyn, NY 11238</a></li>
	  <li><a href="#"></a></li>
	</ul>
      </div>
      
  </p>
  
      <p>
      <div class="input-group">
	<div class="input-group-prepend">
	  <span class="input-group-text">End</span>
	</div>
	<input type="text" aria-label="Last name" class="form-control" value="1100 6th Ave New York, NY 10036">
      </div>
  </p>

  <p>
    
      <div class="dropdown">
	<button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">End Location Examples
	  <span class="caret"></span></button>
	<ul class="dropdown-menu">
	  <li><a href="#">HBO</a></li>
	  <li><a href="#">Murmurmation</a></li>
	  <li><a href="#">Bloomberg</a></li>
	  <li><a href="#">Simon Data</a></li>
	  <li><a href="#">Neuberger Berman</a></li>
	</ul>
      </div>
    </div>
      
      <form action="#" method="post">
	
	{{ form.hidden_tag() }}
	<!--
	<p>
	  Start Date: {{ form.dt(class='datepicker') }}
	</p>
	
	<p>
	      Start Time: {{ form.start_time }}
	</p>
	-->
	<p>
	  <input type="submit"/>
	  </p>
      </form>
    </div>
  </p>
    </div>
  </div>
</div>
<script type="text/javascript">
  
  
  // The first parameter are the coordinates of the center of the map
  // The second parameter is the zoom level
  var map = L.map('map').setView([40.753, -74.000], 12);
  
  // {s}, {z}, {x} and {y} are placeholders for map tiles
  // {x} and {y} are the x/y of where you are on the map
  // {z} is the zoom level
  // {s} is the subdomain of cartodb
    var layer = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
  });
  
  // Now add the layer onto the map
  map.addLayer(layer);

  
  {% if answer != 'none' %}
  var marker = L.marker([{{ start_lat }}, -73.959066]).addTo(map);

  
  var marker = L.marker([40.7395441, -73.9885504]).addTo(map);
  
  var pointA = new L.LatLng(40.677537, -73.959066);
  var pointB = new L.LatLng(40.7395441, -73.9885504);
  var pointList = [pointA, pointB];
  
  var firstpolyline = new L.Polyline(pointList, {
  color: 'red',
  weight: 3,
  opacity: 0.5,
  smoothFactor: 1
});
firstpolyline.addTo(map);
  {% endif %}
  </script>
  </p>
</div>  
{% if answer != 'none' %}


      <div class="space-above">
      <span id="valBox"></span>
      <input type="range" min="5" max="10" step="1" 
	     oninput="showVal(this.value)" onchange="showVal(this.value)">
      </div>
<table style="width:80%" align="center">
  <tr>
    <th>Direction</th>
    <th>Expected time</th>
    <th></th>
    <th>Now</th>
    <th>Then</th>
  </tr>
  <tr>
    <td>Walk to the citibike station at {{start_station}}</td>
    <td>0:02:03</td>
    <td>Bike Availability</td>
    <td>2</td>
    <td>1</td>
  </tr>
  <tr>
    <td>Bike to the citibike station at {{end_station}}</td>
    <td>0:34:23</td>
    <td>Dock Availability</td>
    <td>0</td>
    <td>0</td>
  </tr>
  <tr>
    <td>Walk to your final location.</td>
    <td>0:03:58</td>
    <td></td>
    <td></td>
  </tr>
</table>
{% endif %}
</div>
{% endblock %}
